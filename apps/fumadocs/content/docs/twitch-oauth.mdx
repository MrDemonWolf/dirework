---
title: Twitch OAuth Setup
description: How to create a Twitch application and configure OAuth
---

Dirework uses Twitch OAuth for two purposes:

1. **User login** — Streamers sign in with their Twitch account
2. **Bot account** — A separate Twitch account used for chat commands

## Create a Twitch Application

1. Go to the [Twitch Developer Console](https://dev.twitch.tv/console/apps)
2. Click **Register Your Application**
3. Fill in the details:
   - **Name:** Choose any name (e.g. "Dirework")
   - **OAuth Redirect URLs:** Add both of these:
     ```
     http://localhost:3001/api/auth/callback/twitch
     http://localhost:3001/api/bot/callback
     ```
   - **Category:** Choose "Broadcasting Suite" or "Other"
   - **Client Type:** Confidential
4. Click **Create**
5. Copy the **Client ID** from the application page
6. Click **New Secret** to generate a **Client Secret** and copy it

<Callout type="warn">
  The client secret is only shown once. Copy it immediately and store it safely.
</Callout>

## Add credentials to your environment

In your `apps/web/.env` file:

```bash
TWITCH_CLIENT_ID="<your_client_id>"
TWITCH_CLIENT_SECRET="<your_client_secret>"
```

## Redirect URLs explained

Dirework requires **two** redirect URLs on your Twitch application:

| URL | Purpose |
| --- | --- |
| `{BETTER_AUTH_URL}/api/auth/callback/twitch` | User login via Better Auth |
| `{BETTER_AUTH_URL}/api/bot/callback` | Bot account OAuth callback |

For local development, `BETTER_AUTH_URL` is `http://localhost:3001`.

For production, replace with your domain (e.g. `https://dirework.example.com`).

## Production redirect URLs

When deploying to production, update the redirect URLs in the Twitch Developer Console to match your domain:

```
https://dirework.example.com/api/auth/callback/twitch
https://dirework.example.com/api/bot/callback
```

Also update `BETTER_AUTH_URL` and `CORS_ORIGIN` in your environment to match.

## Connect a Bot Account

After signing in to Dirework:

1. Go to your **Dashboard**
2. In the **Bot Account** card, click **Connect Bot Account**
3. You'll be redirected to Twitch to authorize a bot account
4. Sign in with the Twitch account you want to use as the bot (this should be a **different account** from your streamer account)
5. After authorizing, you'll be redirected back to the dashboard

The bot account needs `chat:read` and `chat:edit` scopes to read and send messages in your Twitch chat.

## Find your Twitch User ID

If you want to restrict who can log in using `ALLOWED_TWITCH_IDS`, you'll need your Twitch user ID.

### Option 1: Twitch API

Visit this URL in your browser (replace `YOUR_USERNAME`):

```
https://www.twitch.tv/YOUR_USERNAME
```

Then use the Twitch API to look up the ID. You can use a tool like [streamscharts.com/tools/convert-username](https://streamscharts.com/tools/convert-username) to convert a Twitch username to a user ID.

### Option 2: Third-party lookup

Use one of these tools:
- [streamscharts.com/tools/convert-username](https://streamscharts.com/tools/convert-username)
- [twitchinsights.net/checkuser](https://twitchinsights.net/checkuser)

Enter your Twitch username and it will show your numeric user ID.

### Using the ID

Add your Twitch user ID to the `ALLOWED_TWITCH_IDS` environment variable:

```bash
# Single user
ALLOWED_TWITCH_IDS="123456789"

# Multiple users (comma-separated)
ALLOWED_TWITCH_IDS="123456789,987654321"

# Allow everyone (leave empty)
ALLOWED_TWITCH_IDS=""
```
